
# language: python

# matrix:
#     include:

#         - os: osx
#           language: generic
#           env: TEST_NAME=01_sanity

#         # - os: osx
#         #   language: generic
#         #   env: TEST_NAME=02_install_twice

#         # - os: osx
#         #   language: generic
#         #   env: TEST_NAME=03_install_uninstall

#         # - os: osx
#         #   language: generic
#         #   env: TEST_NAME=04_uninstall

#         # - os: osx
#         #   language: generic
#         #   env: TEST_NAME=05_outputs

# install:
#     - ./.travis/install.sh
#     - pip install ansible
    
# script: 
#   - ansible --version
#   - cd $TRAVIS_BUILD_DIR/tests/$TEST_NAME && ./start.sh

# cache: pip

sudo: required
language: generic

env:
  - IMAGE_NAME=centos:7 TEST_NAME=01_sanity

services:
  - docker

before_install:
  - sudo apt-get update
  - echo 'DOCKER_OPTS="-H tcp://127.0.0.1:2375 -H unix:///var/run/docker.sock -s devicemapper"' | sudo tee /etc/default/docker > /dev/null
  - sudo service docker restart
  - sleep 5
  - sudo docker pull $IMAGE_NAME

script:
 - |
  sudo docker run \
    --rm=true \
    -v `pwd`:/ansible-project:rw $IMAGE_NAME \
    /bin/bash -c "cd /ansible-project/tests/$TEST_NAME && ./start.sh"
